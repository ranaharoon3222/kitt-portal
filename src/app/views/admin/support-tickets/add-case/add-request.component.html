<!-- Spinner -->
<ngx-spinner bdColor="rgba(237, 238, 240, 1)" size="medium" color="#05adad" type="line-scale-pulse-out">
    <br />
    <p style="font-size: 20px; color: #05adad; font-weight: bold">Loading...</p>
</ngx-spinner>


<!-- Page -->
<div class="mb-8 mx-4">
    <div class="relative flex flex-col min-w-0 break-words w-full mb-6 shadow-lg rounded bg-white">
        <div class="rounded-t mb-0 px-4 py-3 bg-transparent">
            <div class="flex flex-wrap items-center">
                <div class="relative w-full max-w-full flex-grow flex-1">
                    <h2 class="text-blueGray-400 text-2xl font-bold">Open A New Case</h2>
                </div>
            </div>
            <div class="relative w-full max-w-full flex-grow flex-1">
                <div class="h-0 mt-2 border border-solid border-blueGray-200"></div>
            </div>
        </div>
        <div class="px-4 pt-1 pb-4 flex-row flex-grow flex-1 w-full overflow-y-auto">
            <div class="relative w-full min-h-screen-80 max-h-screen-80">
                <form [formGroup]="caseForm" #caseNgForm="ngForm">
                    <div class="relative w-full">
                        <label class="block text-blueGray-500 text-xl font-bold mb-2" htmlFor="grid-password">
                            Title
                            <span class="text-red-500">*</span>
                        </label>
                        <input type="text" [formControlName]="'title'"
                            class="border-1 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-md shadow w-full"
                            placeholder="Title" />
                        <span class="text-red-500"
                            *ngIf="formCtrl.title.touched && formCtrl.title.invalid ||formCtrl.title.errors && caseFormSubmitted">
                            <small *ngIf="formCtrl.title.errors.required">Title is required.</small>
                        </span>
                    </div>

                    <div class="relative w-full mb-3 flex">
                        <div class="xl:w-1/2 lg:w-1/2 md:w-1/2 w-full mt-4 mr-4">
                            <label class="block text-blueGray-500 text-xl font-bold mb-2">
                                Customer
                                <span class="text-red-500">*</span>
                            </label>
                            <div>
                                <input type="text" [formControlName]="'customerId'"
                                    class="border-1 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-md shadow w-full"
                                    placeholder="Customer" />
                            </div>
                        </div>
                        <div class="xl:w-1/2 lg:w-1/2 md:w-1/2 w-full mt-4">
                            <label class="block text-blueGray-500 text-xl font-bold mb-2">
                                Contact
                                <span class="text-red-500">*</span>
                            </label>
                            <div>
                                <input type="text" [formControlName]="'contactId'"
                                    class="border-1 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-md shadow w-full"
                                    placeholder="Contact" />
                            </div>
                        </div>
                    </div>

                    <div class="relative w-full mb-3 flex">
                        <div class="xl:w-1/2 lg:w-1/2 md:w-1/2 w-full mt-4 mr-4">
                            <label class="block text-blueGray-500 text-xl font-bold mb-2" htmlFor="grid-password">
                                Case Type
                                <span class="text-red-500">*</span>
                            </label>
                            <div>
                                <!-- <input type="text" [formControlName]="'contactId'" placeholder="Contact" /> -->
                                <select name="CaseType"
                                    class="border-1 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-md shadow w-full"
                                    id="" [formControlName]="'caseType'">
                                    <option class="text-blueGray-300" value="null" disabled>Select Case Type</option>
                                    <option *ngFor="let opt of caseOptionList" [value]="opt.value">{{opt?.label}}
                                    </option>
                                </select>
                                <span class="text-red-500"
                                    *ngIf="formCtrl.caseType.touched && formCtrl.caseType.invalid || formCtrl.caseType.errors && caseFormSubmitted">
                                    <small *ngIf="formCtrl.caseType.errors.required">Case Type is required.</small>
                                </span>
                            </div>
                        </div>
                        <div class="xl:w-1/2 lg:w-1/2 md:w-1/2 w-full mt-4">
                            <label class="block text-blueGray-500 text-xl font-bold mb-2" htmlFor="grid-password">
                                Rental Property
                                <span class="text-red-500">*</span>
                            </label>
                            <div>
                                <!-- <input type="text" [formControlName]="'contactId'" placeholder="Contact" /> -->
                                <select name="CaseType"
                                    class="border-1 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-md shadow w-full"
                                    id="" [formControlName]="'rentPropId'">
                                    <option class="text-blueGray-300" value="null" disabled>Select Rental Property</option>
                                    <option *ngFor="let prop of accountPropertyList" [value]="prop.recordID">{{prop?.name}}
                                    </option>
                                </select>
                                <span class="text-red-500"
                                    *ngIf="formCtrl.rentPropId.touched && formCtrl.rentPropId.invalid || formCtrl.rentPropId.errors && caseFormSubmitted">
                                    <small *ngIf="formCtrl.rentPropId.errors.required">Rental Property is required.</small>
                                </span>
                            </div>
                        </div>
                    </div>

                    <div class="relative w-full mb-3">
                        <div class="mt-4">
                            <label class="block text-blueGray-500 text-xl font-bold mb-2">
                                Description
                            </label>
                            <div>
                                <textarea type="text" [formControlName]="'description'"
                                    class="border-1 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-md shadow w-full"
                                    placeholder="Description" rows="7">
                                </textarea>
                            </div>
                        </div>
                    </div>

                    <div class="relative float-right text-center mt-6">
                        <button
                            class="bg-teal-500 text-white text-sm font-bold uppercase px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 w-full ease-linear transition-all duration-150"
                            type="button" [disabled]="caseForm.disabled" (click)="submitCase()">
                            <span *ngIf="!caseForm.disabled">
                                Submit
                            </span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>